Differenct ways of Graphical Representation of Missing Data
================
Pulkit Sikri

#### Here are some ways of representing the missing data in a dataset graphically. The data that I've chosen is from a kaggle competition - House Prices: Advanced Regression Techniques (train data)

source: <https://www.kaggle.com/c/house-prices-advanced-regression-techniques/download/train.csv>

``` r
ds = read.csv('C:\\Users\\Administrator\\Desktop\\Kaggle\\train.csv',stringsAsFactors = F)
```

Loading Libraries

``` r
library(ggplot2)
library(Amelia)
```

#### First lets look at the structure of the data and get an overview of it.

``` r
str(ds)
```

    ## 'data.frame':    1460 obs. of  81 variables:
    ##  $ Id           : int  1 2 3 4 5 6 7 8 9 10 ...
    ##  $ MSSubClass   : int  60 20 60 70 60 50 20 60 50 190 ...
    ##  $ MSZoning     : chr  "RL" "RL" "RL" "RL" ...
    ##  $ LotFrontage  : int  65 80 68 60 84 85 75 NA 51 50 ...
    ##  $ LotArea      : int  8450 9600 11250 9550 14260 14115 10084 10382 6120 7420 ...
    ##  $ Street       : chr  "Pave" "Pave" "Pave" "Pave" ...
    ##  $ Alley        : chr  NA NA NA NA ...
    ##  $ LotShape     : chr  "Reg" "Reg" "IR1" "IR1" ...
    ##  $ LandContour  : chr  "Lvl" "Lvl" "Lvl" "Lvl" ...
    ##  $ Utilities    : chr  "AllPub" "AllPub" "AllPub" "AllPub" ...
    ##  $ LotConfig    : chr  "Inside" "FR2" "Inside" "Corner" ...
    ##  $ LandSlope    : chr  "Gtl" "Gtl" "Gtl" "Gtl" ...
    ##  $ Neighborhood : chr  "CollgCr" "Veenker" "CollgCr" "Crawfor" ...
    ##  $ Condition1   : chr  "Norm" "Feedr" "Norm" "Norm" ...
    ##  $ Condition2   : chr  "Norm" "Norm" "Norm" "Norm" ...
    ##  $ BldgType     : chr  "1Fam" "1Fam" "1Fam" "1Fam" ...
    ##  $ HouseStyle   : chr  "2Story" "1Story" "2Story" "2Story" ...
    ##  $ OverallQual  : int  7 6 7 7 8 5 8 7 7 5 ...
    ##  $ OverallCond  : int  5 8 5 5 5 5 5 6 5 6 ...
    ##  $ YearBuilt    : int  2003 1976 2001 1915 2000 1993 2004 1973 1931 1939 ...
    ##  $ YearRemodAdd : int  2003 1976 2002 1970 2000 1995 2005 1973 1950 1950 ...
    ##  $ RoofStyle    : chr  "Gable" "Gable" "Gable" "Gable" ...
    ##  $ RoofMatl     : chr  "CompShg" "CompShg" "CompShg" "CompShg" ...
    ##  $ Exterior1st  : chr  "VinylSd" "MetalSd" "VinylSd" "Wd Sdng" ...
    ##  $ Exterior2nd  : chr  "VinylSd" "MetalSd" "VinylSd" "Wd Shng" ...
    ##  $ MasVnrType   : chr  "BrkFace" "None" "BrkFace" "None" ...
    ##  $ MasVnrArea   : int  196 0 162 0 350 0 186 240 0 0 ...
    ##  $ ExterQual    : chr  "Gd" "TA" "Gd" "TA" ...
    ##  $ ExterCond    : chr  "TA" "TA" "TA" "TA" ...
    ##  $ Foundation   : chr  "PConc" "CBlock" "PConc" "BrkTil" ...
    ##  $ BsmtQual     : chr  "Gd" "Gd" "Gd" "TA" ...
    ##  $ BsmtCond     : chr  "TA" "TA" "TA" "Gd" ...
    ##  $ BsmtExposure : chr  "No" "Gd" "Mn" "No" ...
    ##  $ BsmtFinType1 : chr  "GLQ" "ALQ" "GLQ" "ALQ" ...
    ##  $ BsmtFinSF1   : int  706 978 486 216 655 732 1369 859 0 851 ...
    ##  $ BsmtFinType2 : chr  "Unf" "Unf" "Unf" "Unf" ...
    ##  $ BsmtFinSF2   : int  0 0 0 0 0 0 0 32 0 0 ...
    ##  $ BsmtUnfSF    : int  150 284 434 540 490 64 317 216 952 140 ...
    ##  $ TotalBsmtSF  : int  856 1262 920 756 1145 796 1686 1107 952 991 ...
    ##  $ Heating      : chr  "GasA" "GasA" "GasA" "GasA" ...
    ##  $ HeatingQC    : chr  "Ex" "Ex" "Ex" "Gd" ...
    ##  $ CentralAir   : chr  "Y" "Y" "Y" "Y" ...
    ##  $ Electrical   : chr  "SBrkr" "SBrkr" "SBrkr" "SBrkr" ...
    ##  $ X1stFlrSF    : int  856 1262 920 961 1145 796 1694 1107 1022 1077 ...
    ##  $ X2ndFlrSF    : int  854 0 866 756 1053 566 0 983 752 0 ...
    ##  $ LowQualFinSF : int  0 0 0 0 0 0 0 0 0 0 ...
    ##  $ GrLivArea    : int  1710 1262 1786 1717 2198 1362 1694 2090 1774 1077 ...
    ##  $ BsmtFullBath : int  1 0 1 1 1 1 1 1 0 1 ...
    ##  $ BsmtHalfBath : int  0 1 0 0 0 0 0 0 0 0 ...
    ##  $ FullBath     : int  2 2 2 1 2 1 2 2 2 1 ...
    ##  $ HalfBath     : int  1 0 1 0 1 1 0 1 0 0 ...
    ##  $ BedroomAbvGr : int  3 3 3 3 4 1 3 3 2 2 ...
    ##  $ KitchenAbvGr : int  1 1 1 1 1 1 1 1 2 2 ...
    ##  $ KitchenQual  : chr  "Gd" "TA" "Gd" "Gd" ...
    ##  $ TotRmsAbvGrd : int  8 6 6 7 9 5 7 7 8 5 ...
    ##  $ Functional   : chr  "Typ" "Typ" "Typ" "Typ" ...
    ##  $ Fireplaces   : int  0 1 1 1 1 0 1 2 2 2 ...
    ##  $ FireplaceQu  : chr  NA "TA" "TA" "Gd" ...
    ##  $ GarageType   : chr  "Attchd" "Attchd" "Attchd" "Detchd" ...
    ##  $ GarageYrBlt  : int  2003 1976 2001 1998 2000 1993 2004 1973 1931 1939 ...
    ##  $ GarageFinish : chr  "RFn" "RFn" "RFn" "Unf" ...
    ##  $ GarageCars   : int  2 2 2 3 3 2 2 2 2 1 ...
    ##  $ GarageArea   : int  548 460 608 642 836 480 636 484 468 205 ...
    ##  $ GarageQual   : chr  "TA" "TA" "TA" "TA" ...
    ##  $ GarageCond   : chr  "TA" "TA" "TA" "TA" ...
    ##  $ PavedDrive   : chr  "Y" "Y" "Y" "Y" ...
    ##  $ WoodDeckSF   : int  0 298 0 0 192 40 255 235 90 0 ...
    ##  $ OpenPorchSF  : int  61 0 42 35 84 30 57 204 0 4 ...
    ##  $ EnclosedPorch: int  0 0 0 272 0 0 0 228 205 0 ...
    ##  $ X3SsnPorch   : int  0 0 0 0 0 320 0 0 0 0 ...
    ##  $ ScreenPorch  : int  0 0 0 0 0 0 0 0 0 0 ...
    ##  $ PoolArea     : int  0 0 0 0 0 0 0 0 0 0 ...
    ##  $ PoolQC       : chr  NA NA NA NA ...
    ##  $ Fence        : chr  NA NA NA NA ...
    ##  $ MiscFeature  : chr  NA NA NA NA ...
    ##  $ MiscVal      : int  0 0 0 0 0 700 0 350 0 0 ...
    ##  $ MoSold       : int  2 5 9 2 12 10 8 11 4 1 ...
    ##  $ YrSold       : int  2008 2007 2008 2006 2008 2009 2007 2009 2008 2008 ...
    ##  $ SaleType     : chr  "WD" "WD" "WD" "WD" ...
    ##  $ SaleCondition: chr  "Normal" "Normal" "Normal" "Abnorml" ...
    ##  $ SalePrice    : int  208500 181500 223500 140000 250000 143000 307000 200000 129900 118000 ...

#### At a glance, we can see that there are some variables which has NA values. Let us look deeper into it graphically!

Pie Chart of Missing Values
---------------------------

``` r
sum.missing = sum(is.na(ds))
sum.given = sum(!is.na(ds))
total.values = prod(dim(ds))
pct.missing = round(sum.missing*100/total.values,2)
pct.given = round(sum.given*100/total.values,2)
k=c(sum.missing,sum.given)
pie(k,labels = c(paste("Missing Values",pct.missing,"%"),
                 paste("Given Values",pct.given,"%")),
                 main = "Given Values V/s Missing Values",
                 col=c("Grey","Sky Blue"))
```

![](na_graphs_files/figure-markdown_github-ascii_identifiers/unnamed-chunk-4-1.png)

#### The above Pie Chart shows Percentage of given and missing values.

Displaying only the variables with missing data
-----------------------------------------------

``` r
num_na = sort(colSums(is.na(ds)),decreasing = T)
num_na = num_na[num_na>0]
ggplot()+
  geom_bar(aes(x=reorder(names(num_na),num_na),y=num_na),stat = 'identity')+
  xlab("Variables with Missing Values")+
  ylab("Number of Missing Values") +
  coord_flip() +
  theme(axis.text.y  = element_text(size=30, face = "bold"),
        axis.text.x = element_text(size=30),
        axis.title.x = element_text(size = 35),
        axis.title.y = element_text(size = 35))
```

![](na_graphs_files/figure-markdown_github-ascii_identifiers/unnamed-chunk-5-1.png)

#### The above bar chart shows only those variables which have missing values and the total number of correspoing missing values.

Displaying all the variables with total rows and number of missing values
-------------------------------------------------------------------------

``` r
k=colSums(is.na(ds))

ggplot()+
  geom_bar(aes(x=names(ds),y=nrow(ds)),stat = 'identity',fill='white',colour='grey',size=0.1)+
  geom_bar(aes(x=names(ds),y=k),stat='identity',fill='red') +
  scale_y_continuous(breaks=nrow(ds)) +
  xlab("Variables")+
  ylab("Number of Missing Values v/s Toalal Values") +
  coord_flip() +
  theme(axis.text.y  = element_text(size=15, face = "bold"),
        axis.text.x = element_text(size=30),
        axis.title.x = element_text(size = 35),
        axis.title.y = element_text(size = 35))
```

![](na_graphs_files/figure-markdown_github-ascii_identifiers/unnamed-chunk-6-1.png)

#### The above bar chart shows all the variables along with total number of rows and the red bar indicates the total number of missing values in each variable.

Displaying all the variables with percentage of missing values
--------------------------------------------------------------

``` r
k=colSums(is.na(ds))*100/nrow(ds)

ggplot()+
  geom_bar(aes(x=names(ds),y=100),stat = 'identity',fill='white',colour='grey',size=0.1)+
  geom_bar(aes(x=names(ds),y=k),stat='identity',fill='red') +
  scale_y_continuous(breaks=nrow(ds)) +
  xlab("Variables")+
  ylab("Percentage Missing Values") +
  scale_y_continuous(breaks=c(1,25,50,75,100)) +
  coord_flip() +
  theme(axis.text.y  = element_text(size=15, face = "bold"),
        axis.text.x = element_text(size=30),
        axis.title.x = element_text(size = 35),
        axis.title.y = element_text(size = 35))
```

    ## Scale for 'y' is already present. Adding another scale for 'y', which
    ## will replace the existing scale.

![](na_graphs_files/figure-markdown_github-ascii_identifiers/unnamed-chunk-7-1.png)

#### The above bar chart shows all the variables along with total number of rows and the red bar indicates the percentange of missing values in each variable.

Missingness Map using Amelia package
------------------------------------

``` r
missmap(ds,x.cex = 1.5,y.cex = 1,col = c("white","black"))
```

![](na_graphs_files/figure-markdown_github-ascii_identifiers/unnamed-chunk-8-1.png)

#### missmap function plots a missingness map showing where missingness occurs in the dataset. In the above map white line indicates the index of missing value
